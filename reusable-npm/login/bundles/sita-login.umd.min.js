!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/material"),require("@angular/common"),require("@angular/flex-layout")):"function"==typeof define&&define.amd?define("@sita/login",["exports","@angular/core","@angular/forms","@angular/material","@angular/common","@angular/flex-layout"],t):t((e.sita=e.sita||{},e.sita.login={}),e.ng.core,e.ng.forms,e.ng.material,e.ng.common,e.ng["flex-layout"])}(this,function(e,t,i,n,o,r){"use strict";function d(n,o){var r,a,i,e,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(i=2&e[0]?a["return"]:e[0]?a["throw"]||((i=a["return"])&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){l.label=e[1];break}if(6===e[0]&&l.label<i[1]){l.label=i[1],i=e;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(e);break}i[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(n,l)}catch(t){e=[6,t],a=0}finally{r=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}var a=function(){function e(e){this.fb=e,this.fields=[],this.submit=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){console.log(e)},e.prototype.ngOnInit=function(){var t=this;"string"==typeof this.fields&&(this.fields=JSON.parse(this.fields));var e=this.fields.find(function(e){return"email"===e.name});e&&!e.validations&&(e.validations=[{name:"required",validator:i.Validators.required,message:"Email Required"},{name:"pattern",validator:i.Validators.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$"),message:"Invalid email"}]);var n=this.fields.find(function(e){return"username"===e.name});n&&!n.validations&&(n.validations=[{name:"required",validator:i.Validators.required,message:"Name Required"},{name:"pattern",validator:i.Validators.pattern("^[a-zA-Z]+$"),message:"Accept only text"}]);var o=this.fields.find(function(e){return"password"===e.name});o&&!o.validations&&(o.validations=[{name:"required",validator:i.Validators.required,message:"Password Required"}]);var r=this.fields.find(function(e){return"dob"===e.name});r&&!r.validations&&(r.validations=[{name:"required",validator:i.Validators.required,message:"Date of Birth Required"}]),this.loginForm=this.createControl();var a=this.fields.find(function(e){return"ldap"===e.name});this.loginForm.valueChanges.subscribe(function(e){a&&(t["switch"]=t.loginForm.get(a.name).value)})},e.prototype.onSubmit=function(e){e.preventDefault(),e.stopPropagation(),this.loginForm.valid?this.submit.emit(this.loginForm.value):this.validateAllFormFields(this.loginForm)},e.prototype.createControl=function(){var n=this,o=this.fb.group({});return this.fields.forEach(function(e){if("button"!==e.type){var t=n.fb.control(e.value,n.bindValidations(e.validations||[]));o.addControl(e.name,t)}}),o},e.prototype.bindValidations=function(e){if(0<e.length){return i.Validators.compose(Array.from(function(r){var a,i,l,s,u;return d(this,function(e){switch(e.label){case 0:e.trys.push([0,5,6,7]),t=r,n="function"==typeof Symbol&&t[Symbol.iterator],o=0,l=n?n.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}},s=l.next(),e.label=1;case 1:return s.done?[3,4]:[4,s.value.validator];case 2:e.sent(),e.label=3;case 3:return s=l.next(),[3,1];case 4:return[3,7];case 5:return u=e.sent(),a={error:u},[3,7];case 6:try{s&&!s.done&&(i=l["return"])&&i.call(l)}finally{if(a)throw a.error}return[7];case 7:return[2]}var t,n,o})}(e)))}return null},e.prototype.validateAllFormFields=function(t){Object.keys(t.controls).forEach(function(e){t.get(e).markAsTouched({onlySelf:!0})})},e.decorators=[{type:t.Component,args:[{selector:"sita-login",template:'<div [ngStyle]=\'{ "background-image": loginBgImage}\' fxFill fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="1.5rem" class="mat-typography">\n  <div>\n    <h1 fxLayoutAlign="center"> {{title}} </h1>\n    <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="2rem">\n      <div class="language-selector">\n        <ng-content select="[login-lang]"></ng-content>\n      </div>\n    </div>\n  </div>\n  <div class="login-container" fxLayout="row" fxLayoutAlign="center">    \n    <mat-card fxFlex="90%" fxFlex.sm="66%" fxFlex.md="50%" fxFlex.gt-md="33%" class="login-box">\n      <label class="login-error" *ngIf="loginError"> {{loginError}} </label>\n      <form (ngSubmit)="onSubmit($event)" [formGroup]="loginForm" novalidate>\n          <ng-container *ngFor="let field of fields;" >\n              <ng-container *ngIf="switch && field.name !== \'username\' && field.name !== \'password\'" dynamicField [field]="field" [group]="loginForm">\n\n              </ng-container>\n              <ng-container *ngIf="!switch" dynamicField [field]="field" [group]="loginForm">\n\n              </ng-container>\n          </ng-container>\n      </form>\n    </mat-card>\n  </div>\n</div>\n\n',styles:[":host{display:flex;flex:1;background-color:#f5f5f5}.inline-loader{display:inline-block}.version{margin:0}.login-container,.mat-form-field{width:100%}.login-error{color:red;text-align:center;width:100%}"]}]}],e.ctorParameters=function(){return[{type:i.FormBuilder}]},e.propDecorators={fields:[{type:t.Input}],title:[{type:t.Input}],loginError:[{type:t.Input}],loginBgImage:[{type:t.Input}],submit:[{type:t.Output}]},e}(),l=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{exports:[n.MatAutocompleteModule,n.MatButtonModule,n.MatButtonToggleModule,n.MatCardModule,n.MatCheckboxModule,n.MatChipsModule,n.MatCommonModule,n.MatDatepickerModule,n.MatDialogModule,n.MatDividerModule,n.MatExpansionModule,n.MatFormFieldModule,n.MatGridListModule,n.MatIconModule,n.MatInputModule,n.MatLineModule,n.MatListModule,n.MatMenuModule,n.MatNativeDateModule,n.MatOptionModule,n.MatPaginatorModule,n.MatProgressBarModule,n.MatProgressSpinnerModule,n.MatPseudoCheckboxModule,n.MatRadioModule,n.MatRippleModule,n.MatSelectModule,n.MatSidenavModule,n.MatSlideToggleModule,n.MatSliderModule,n.MatSnackBarModule,n.MatSortModule,n.MatStepperModule,n.MatTableModule,n.MatTabsModule,n.MatToolbarModule,n.MatTooltipModule]}]}],e}(),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-input",template:'\n<mat-form-field style="display:block" [formGroup]="group">\n  <input matInput [formControlName]="field.name" [placeholder]="field.label" [type]="field.inputType">\n  <ng-container *ngFor="let validation of field.validations;" ngProjectAs="mat-error">\n    <mat-error *ngIf="group.get(field.name).hasError(validation.name)">{{validation.message}}</mat-error>\n  </ng-container>\n</mat-form-field>\n',styles:[]}]}],e.ctorParameters=function(){return[]},e}(),u=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-button",template:'\n<div [formGroup]="group" [ngStyle]="{\'text-align\': field.textAlign}">\n  <button type="submit" mat-raised-button color="primary">{{field.label}}</button>\n</div>\n',styles:[]}]}],e.ctorParameters=function(){return[]},e}(),c=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-select",template:'\n<mat-form-field style="display:block" [formGroup]="group">\n  <mat-select [placeholder]="field.label" [formControlName]="field.name">\n    <mat-option *ngFor="let item of field.options" [value]="item">{{item}}</mat-option>\n  </mat-select>\n</mat-form-field>\n',styles:[]}]}],e.ctorParameters=function(){return[]},e}(),p=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-date",template:'\n<mat-form-field class="demo-full-width margin-top" [formGroup]="group">\n<input matInput [matDatepicker]="picker" [formControlName]="field.name" [placeholder]="field.label">\n<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>\n<mat-datepicker #picker></mat-datepicker>\n<mat-hint></mat-hint>\n<ng-container *ngFor="let validation of field.validations;" ngProjectAs="mat-error">\n<mat-error *ngIf="group.get(field.name).hasError(validation.name)">{{validation.message}}</mat-error>\n</ng-container>\n</mat-form-field>\n',styles:[]}]}],e.ctorParameters=function(){return[]},e}(),f=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-radiobutton",template:'\n<div class="demo-full-width margin-top" [formGroup]="group">\n<label class="radio-label-padding">{{field.label}}:</label>\n<mat-radio-group [formControlName]="field.name">\n<mat-radio-button *ngFor="let item of field.options" [value]="item">{{item}}</mat-radio-button>\n</mat-radio-group>\n</div>\n',styles:[]}]}],e.ctorParameters=function(){return[]},e}(),m=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-checkbox",template:'\n<div [formGroup]="group" >\n<mat-checkbox [formControlName]="field.name">{{field.label}}</mat-checkbox>\n</div>\n',styles:[]}]}],e.ctorParameters=function(){return[]},e}(),g=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-toggle-switch",template:'<div [formGroup]="group" [ngStyle]="{\'text-align\': field.textAlign}">\n    <label class="ldap-container">\n        <span class="ldap-text"> {{field.label}} </span>\n    </label>\n    <label class="bs-switch">\n        <input type="checkbox" [formControlName]="field.name" />\n        <span class="slider round"></span>\n    </label>\n</div>',styles:['.bs-switch{position:relative;display:inline-block;width:60px;height:34px}.bs-switch input{display:none}.bs-switch input:checked+.slider{background-color:#2196f3}.bs-switch input:checked+.slider:before{-webkit-transform:translateX(26px);transform:translateX(26px)}.bs-switch .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.bs-switch .slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}.bs-switch .slider.round{border-radius:34px}.bs-switch .slider.round:before{border-radius:50%}[type=checkbox]:checked,[type=checkbox]:not(:checked),mat-checkbox:checked,mat-checkbox:not(:checked){position:absolute;opacity:0;pointer-events:none}.ldap-text{position:absolute;right:0;bottom:0}.ldap-container{position:relative;display:inline-block;width:100px;height:34px}']}]}],e.ctorParameters=function(){return[]},e}(),h={input:s,button:u,select:c,date:p,radiobutton:f,checkbox:m,"switch":g},y=function(){function e(e,t){this.resolver=e,this.container=t}return e.prototype.ngOnInit=function(){var e=this.resolver.resolveComponentFactory(h[this.field.type]);this.componentRef=this.container.createComponent(e),this.componentRef.instance.field=this.field,this.componentRef.instance.group=this.group},e.decorators=[{type:t.Directive,args:[{selector:"[dynamicField]"}]}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ViewContainerRef}]},e.propDecorators={field:[{type:t.Input}],group:[{type:t.Input}]},e}(),b=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,i.ReactiveFormsModule,r.FlexLayoutModule,l],declarations:[a,y,s,u,c,p,f,m,g],entryComponents:[s,u,c,p,f,m,g],exports:[a]}]}],e}();e.LoginComponent=a,e.LoginModule=b,e.ɵd=u,e.ɵh=m,e.ɵf=p,e.ɵb=y,e.ɵc=s,e.ɵg=f,e.ɵe=c,e.ɵi=g,e.ɵa=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sita-login.umd.min.js.map